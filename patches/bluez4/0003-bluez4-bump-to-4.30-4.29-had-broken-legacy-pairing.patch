From f39afdddcfe6b1224aac06a93b4366c6f41ba62c Mon Sep 17 00:00:00 2001
From: =?utf-8?q?Jan=20L=C3=BCbbe?= <jluebbe@debian.org>
Date: Tue, 17 Feb 2009 14:32:59 +0000
Subject: [PATCH] bluez4: bump to 4.30 (4.29 had broken legacy pairing)

---
 conf/checksums.ini            |    4 +++
 packages/bluez/bluez4_4.29.bb |   54 -----------------------------------------
 packages/bluez/bluez4_4.30.bb |   54 +++++++++++++++++++++++++++++++++++++++++
 3 files changed, 58 insertions(+), 54 deletions(-)
 delete mode 100644 packages/bluez/bluez4_4.29.bb
 create mode 100644 packages/bluez/bluez4_4.30.bb

diff --git a/conf/checksums.ini b/conf/checksums.ini
index 5a37f48..3fadf2e 100644
--- a/conf/checksums.ini
+++ b/conf/checksums.ini
@@ -2330,6 +2330,10 @@ sha256=9e042fcf2d29a58bd60fe3743130095992c62da4c865d01e6fea2d8d6d20583a
 md5=9198f428277693c16c212910996075b4
 sha256=4fe29e8b7c28e6802853867531307704a78f69f37a09d7565268141a2a462644
 
+[http://www.kernel.org/pub/linux/bluetooth/bluez-4.30.tar.gz]
+md5=f6a4b58907a6bec424247ee572d43a2c
+sha256=5a2e6e83062699fb01babfb5b211054e01dde097d3b31767135be5447bb05bde
+
 [http://www.kernel.org/pub/linux/bluetooth/bluez-4.7.tar.gz]
 md5=2aa806940d2c841e57a9b2ab7302b750
 sha256=ed384dea4f5f21157758fcd7db64db19ce0b410509c26630706e4a3c779287a0
diff --git a/packages/bluez/bluez4_4.29.bb b/packages/bluez/bluez4_4.29.bb
deleted file mode 100644
index c9aa79e..0000000
--- a/packages/bluez/bluez4_4.29.bb
+++ /dev/null
@@ -1,54 +0,0 @@
-DESCRIPTION = "Linux Bluetooth Stack Userland V4"
-SECTION = "libs"
-PRIORITY = "optional"
-DEPENDS = "gst-plugins-base alsa-lib libusb-compat libusb1 dbus-glib"
-HOMEPAGE = "http://www.bluez.org"
-LICENSE = "GPL"
-PR = "r2"
-
-SRC_URI = "\
-  http://www.kernel.org/pub/linux/bluetooth/bluez-${PV}.tar.gz \
-  file://fix-dfutool-usb-declaration-mismatch.patch;patch=1 \
-  file://sbc-thumb.patch;patch=1 \
-  file://hid2hci_usb_init.patch;patch=1 \
-"    
-S = "${WORKDIR}/bluez-${PV}"
-
-inherit autotools pkgconfig
-
-OE_LT_RPATH_ALLOW = "any"
-OE_LT_RPATH_ALLOW[export] = "1"
-
-EXTRA_OECONF = "\
-  --enable-gstreamer \
-  --enable-alsa \
-  --disable-usb \
-  --enable-netlink \
-  --enable-tools \
-  --enable-bccmd \
-  --enable-hid2hci \
-  --enable-dfutool \
-  --enable-hidd \
-  --enable-pandd \
-  --enable-dund \
-  --disable-cups \
-  --enable-test \
-  --enable-manpages \
-  --enable-configfiles \
-  --enable-initscripts \
-  --disable-pcmciarules \
-"
-
-PACKAGES =+ "gst-plugin-bluez libasound-module-bluez"
-
-FILES_gst-plugin-bluez = "${libdir}/gstreamer-0.10/lib*.so"
-FILES_libasound-module-bluez = "${libdir}/alsa-lib/lib*.so"
-FILES_${PN} += "${libdir}/bluetooth/plugins/*.so"
-FILES_${PN}-dev += "\
-  ${libdir}/bluetooth/plugins/*.la \
-  ${libdir}/*/*.la \
-"
-FILES_${PN}-dbg += "\
-  ${libdir}/bluetooth/plugins/.debug \
-  ${libdir}/*/.debug \
-"
diff --git a/packages/bluez/bluez4_4.30.bb b/packages/bluez/bluez4_4.30.bb
new file mode 100644
index 0000000..55386c0
--- /dev/null
+++ b/packages/bluez/bluez4_4.30.bb
@@ -0,0 +1,54 @@
+DESCRIPTION = "Linux Bluetooth Stack Userland V4"
+SECTION = "libs"
+PRIORITY = "optional"
+DEPENDS = "gst-plugins-base alsa-lib libusb-compat libusb1 dbus-glib"
+HOMEPAGE = "http://www.bluez.org"
+LICENSE = "GPL"
+PR = "r0"
+
+SRC_URI = "\
+  http://www.kernel.org/pub/linux/bluetooth/bluez-${PV}.tar.gz \
+  file://fix-dfutool-usb-declaration-mismatch.patch;patch=1 \
+  file://sbc-thumb.patch;patch=1 \
+  file://hid2hci_usb_init.patch;patch=1 \
+"    
+S = "${WORKDIR}/bluez-${PV}"
+
+inherit autotools pkgconfig
+
+OE_LT_RPATH_ALLOW = "any"
+OE_LT_RPATH_ALLOW[export] = "1"
+
+EXTRA_OECONF = "\
+  --enable-gstreamer \
+  --enable-alsa \
+  --disable-usb \
+  --enable-netlink \
+  --enable-tools \
+  --enable-bccmd \
+  --enable-hid2hci \
+  --enable-dfutool \
+  --enable-hidd \
+  --enable-pandd \
+  --enable-dund \
+  --disable-cups \
+  --enable-test \
+  --enable-manpages \
+  --enable-configfiles \
+  --enable-initscripts \
+  --disable-pcmciarules \
+"
+
+PACKAGES =+ "gst-plugin-bluez libasound-module-bluez"
+
+FILES_gst-plugin-bluez = "${libdir}/gstreamer-0.10/lib*.so"
+FILES_libasound-module-bluez = "${libdir}/alsa-lib/lib*.so"
+FILES_${PN} += "${libdir}/bluetooth/plugins/*.so"
+FILES_${PN}-dev += "\
+  ${libdir}/bluetooth/plugins/*.la \
+  ${libdir}/*/*.la \
+"
+FILES_${PN}-dbg += "\
+  ${libdir}/bluetooth/plugins/.debug \
+  ${libdir}/*/.debug \
+"
-- 
1.6.0.6

